<!DOCTYPE html>
<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-analytics.js";
    import { getAuth, setPersistence, signInWithEmailAndPassword, browserSessionPersistence } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-auth.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-firestore.js"
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
        apiKey: "AIzaSyAWcOr7SsFnbzgbRBrpyWzXl9mEgKtIgrM",
        authDomain: "uitfarmerclass.firebaseapp.com",
        projectId: "uitfarmerclass",
        storageBucket: "uitfarmerclass.appspot.com",
        messagingSenderId: "603995142746",
        appId: "1:603995142746:web:417413652766ab9906f663",
        measurementId: "G-CJEW8BHZ4C"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const auth = getAuth(app);
    const db = getFirestore(app);

    const loginForm = document.querySelector('#login-form');
    loginForm.addEventListener('submit', (e) => {
        e.preventDefault();
        var remember = document.getElementById('remember');
        const email = loginForm['login-email'].value;
        const password = loginForm['login-password'].value;
        if (remember.checked) { signInWithEmailAndPassword(auth, email, password) }
        else {
            setPersistence(auth, browserSessionPersistence).then(() => {
                return signInWithEmailAndPassword(auth, email, password)
            })
        }
    })
    auth.onAuthStateChanged(user => {
        console.log(user);
        if(user)
        window.location = "/test"
    })
</script>

<html>
<head>
    <title>Login Page</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="page-wrapper">
        <div class="container">
            <div class="container container-header">
                <img class="logo" src="Logo-DH-Cong-Nghe-Thong-Tin-UIT.webp" />
                <div class="logo text-box">
                    <div class="text">University of Information</div>
                    <div class="text">Technology - VNUHCM</div>
                    <div class="text group-name">UITFarmer Smart Desk</div>
                </div>
            </div>
            <div class="input-wrapper">
                <div class="input-wrapper">
                    <form id="login-form">
                        <input class="input-box username" id="login-email" placeholder="  Username" />
                        <input type="password" class="input-box password" id="login-password" placeholder="  Password" />
                        <div class="input-wrapper remember-wrap">
                            <label class="remember-text"><input id="remember" type="checkbox" class="remember" />Remember me</label>
                            <div class="gap"></div>
                            <a href="https://youtube.com" class="forget remember-text">Forgot password</a>
                        </div>
                        <input type="submit" class="login-button" value="LOGIN" />
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="bottom-header">
        <img class="fce" src="FCE-Site-logo.png" />
        <div class="text-box bottom">
            <div class="text bottom">TRƯỜNG ĐẠI HỌC CÔNG NGHỆ THÔNG TIN</div>
            <div class="text bottom">ĐẠI HỌC QUỐC GIA THÀNH PHỐ HỒ CHÍ MINH</div>
            <div class="text bottom">@COPYRIGHT UITFarmer - CE 2023</div>

        </div>
        <div class="text-box bottom">
            <div class="text right">KP6, Linh Trung, Thủ Đức, TP.HCM</div>
            <div class="text right">UITFarmer.K15@gmail.com</div>
        </div>
    </div>

</body>
</html>